(function(){"use strict";var e={7323:function(e,t,o){var s=o(5130),r=o(6768),i=o(4232);const n={class:"flex flex-col lg:flex-row"};function a(e,t,o,s,a,l){const c=(0,r.g2)("SideMenu"),u=(0,r.g2)("router-view");return(0,r.uX)(),(0,r.CE)("div",n,[(0,r.bF)(c,{links:a.links,linkRoutes:a.linkRoutes},null,8,["links","linkRoutes"]),(0,r.bF)(u,(0,i._B)((0,r.Ng)({..."register"!==l.currentRouteName&&{competitionDays:a.competitionDays,currentCompetitionDay:a.currentCompetitionDay,currentFormattedDate:a.currentFormattedDate,competitionId:a.competitionId,competitionName:a.competitionName,formattedStartingDay:a.formattedStartingDay,formattedEndingDay:a.formattedEndingDay,competitions:a.competitions}})),null,16)])}var l=o.p+"img/hamburger.953cda6b.svg",c=o.p+"img/cross-close.bfaee5f3.svg",u=o.p+"img/InterbudoLogo.68668a66.png";const d={class:"hamburger custom-bg-blue text-white z-10"},p={class:"custom-bg-blue text-white side-menu-mobile"},m={class:"align-center container"},g={key:0,class:"pt-4"},b={key:0,class:"font-bold"},h={key:1,class:"login-container m-auto"},y={class:"pb-2 flex flex-col"},v={class:"pb-1 flex flex-col"},f={key:0,class:"error font-bold text-red-600 pb-6"},k={key:2,class:"text-center flex flex-col font-semibold pt-8"},x=["onClick"],w={class:"underline-text"},C={key:0,class:"pt-6"},L={class:"custom-bg-blue text-white side-menu-desktop"},E={class:"align-center container"},D={key:0,class:"pt-4"},P={key:0,class:"font-bold"},M={key:1,class:"login-container m-auto"},_={class:"pb-2 flex flex-col items-center"},S={class:"pb-1 flex flex-col items-center"},X={key:0,class:"error font-bold text-red-600 pb-6"},$={key:2,class:"text-center flex flex-col font-semibold pt-8"},j=["onClick"],I={class:"underline-text"},q={key:0,class:"pt-6"};function N(e,t,o,n,a,N){const A=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.Lk)("div",d,[(0,r.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>N.toggleMenu&&N.toggleMenu(...e))},t[13]||(t[13]=[(0,r.Lk)("img",{src:l,alt:"Menu",class:"w-16 h-16 p-3 align-left"},null,-1)]))]),(0,r.bo)((0,r.Lk)("div",p,[(0,r.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>N.closeMenu&&N.closeMenu(...e)),class:"absolute top-4 right-4 z-50 text-white text-xl"},t[14]||(t[14]=[(0,r.Lk)("img",{src:c,alt:"Menu",class:"w-12 h-12 text-right"},null,-1)])),(0,r.Lk)("div",m,[t[19]||(t[19]=(0,r.Lk)("img",{src:u,class:"m-auto size-48 py-4"},null,-1)),N.userLogged?((0,r.uX)(),(0,r.CE)("div",g,[t[15]||(t[15]=(0,r.Lk)("div",null,"Bienvenue",-1)),N.userName?((0,r.uX)(),(0,r.CE)("div",b,(0,i.v_)(N.userName),1)):(0,r.Q3)("",!0)])):((0,r.uX)(),(0,r.CE)("div",h,[(0,r.Lk)("form",{onSubmit:t[5]||(t[5]=(0,s.D$)(((...e)=>N.login&&N.login(...e)),["prevent"]))},[(0,r.Lk)("div",y,[t[16]||(t[16]=(0,r.Lk)("label",{for:"email"},"Email",-1)),(0,r.bo)((0,r.Lk)("input",{type:"email",class:"log-input text-black px-2 self-center","onUpdate:modelValue":t[2]||(t[2]=e=>a.email=e),required:""},null,512),[[s.Jo,a.email]])]),(0,r.Lk)("div",v,[t[17]||(t[17]=(0,r.Lk)("label",{for:"password"},"Password",-1)),(0,r.bo)((0,r.Lk)("input",{type:"password",class:"log-input text-black px-2 self-center","onUpdate:modelValue":t[3]||(t[3]=e=>a.password=e),required:""},null,512),[[s.Jo,a.password]])]),(0,r.Lk)("div",{class:"pb-6 underline cursor-pointer",onClick:t[4]||(t[4]=e=>N.forgottenPassword())}," Mot de passe oublié? "),a.error?((0,r.uX)(),(0,r.CE)("p",f,(0,i.v_)(a.error),1)):(0,r.Q3)("",!0),t[18]||(t[18]=(0,r.Lk)("button",{type:"submit",class:"bg-white text-black border border-gray-300 px-4 py-2 text-sm uppercase shadow hover:bg-gray-100"}," Connexion ",-1))],32)])),N.userLogged?((0,r.uX)(),(0,r.CE)("ul",k,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.links,(e=>((0,r.uX)(),(0,r.CE)("li",{class:(0,i.C4)(["inline hover:text-gray-200 cell cursor-pointer py-4",{"underline-gradient":a.selectedLink===e}]),key:e,onClick:t=>N.handleClick(e)},[(0,r.Lk)("span",w,(0,i.v_)(e),1)],10,x)))),128))])):(0,r.Q3)("",!0),N.userLogged?((0,r.uX)(),(0,r.CE)("button",{key:3,type:"submit",class:"bg-white text-black border border-gray-300 px-4 py-2 text-sm uppercase shadow hover:bg-gray-100 mt-8",onClick:t[6]||(t[6]=(...e)=>N.logout&&N.logout(...e))}," Déconnexion ")):(0,r.Q3)("",!0)]),N.userLogged?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("div",C,[t[20]||(t[20]=(0,r.Lk)("p",null,"Vous n'avez pas de compte ?",-1)),(0,r.bF)(A,{to:{name:"register"}},{default:(0,r.k6)((()=>[(0,r.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>N.closeMenu&&N.closeMenu(...e)),class:"bg-white text-black border border-gray-300 px-4 py-2 text-sm uppercase shadow hover:bg-gray-100 mt-2"}," Créer un compte ")])),_:1})]))],512),[[s.aG,a.isMobile&&a.toggleMobileMenu]]),(0,r.bo)((0,r.Lk)("div",L,[(0,r.Lk)("div",E,[t[25]||(t[25]=(0,r.Lk)("img",{src:u,class:"m-auto size-48 py-4"},null,-1)),N.userLogged?((0,r.uX)(),(0,r.CE)("div",D,[t[21]||(t[21]=(0,r.Lk)("div",null,"Bienvenue",-1)),N.userName?((0,r.uX)(),(0,r.CE)("div",P,(0,i.v_)(N.userName),1)):(0,r.Q3)("",!0)])):(0,r.Q3)("",!0),N.userLogged?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("div",M,[(0,r.Lk)("form",{onSubmit:t[11]||(t[11]=(0,s.D$)(((...e)=>N.login&&N.login(...e)),["prevent"]))},[(0,r.Lk)("div",_,[t[22]||(t[22]=(0,r.Lk)("label",{for:"email"},"Email",-1)),(0,r.bo)((0,r.Lk)("input",{type:"email",class:"log-input text-black px-2","onUpdate:modelValue":t[8]||(t[8]=e=>a.email=e),required:""},null,512),[[s.Jo,a.email]])]),(0,r.Lk)("div",S,[t[23]||(t[23]=(0,r.Lk)("label",{for:"password"},"Password",-1)),(0,r.bo)((0,r.Lk)("input",{type:"password",class:"log-input text-black px-2","onUpdate:modelValue":t[9]||(t[9]=e=>a.password=e),required:""},null,512),[[s.Jo,a.password]])]),(0,r.Lk)("div",{class:"pb-6 underline text-sm cursor-pointer",onClick:t[10]||(t[10]=e=>N.forgottenPassword())}," Mot de passe oublié? "),a.error?((0,r.uX)(),(0,r.CE)("p",X,(0,i.v_)(a.error),1)):(0,r.Q3)("",!0),t[24]||(t[24]=(0,r.Lk)("button",{type:"submit",class:"bg-white text-black border border-gray-300 px-4 py-2 text-sm uppercase shadow hover:bg-gray-100"}," Connexion ",-1))],32)])),N.userLogged?((0,r.uX)(),(0,r.CE)("ul",$,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.links,(e=>((0,r.uX)(),(0,r.CE)("li",{class:(0,i.C4)(["inline hover:text-gray-200 cell cursor-pointer py-4",{"underline-gradient":a.selectedLink===e}]),key:e,onClick:t=>N.handleClick(e)},[(0,r.Lk)("span",I,(0,i.v_)(e),1)],10,j)))),128))])):(0,r.Q3)("",!0),N.userLogged?((0,r.uX)(),(0,r.CE)("button",{key:3,type:"submit",class:"bg-white text-black border border-gray-300 px-4 py-2 text-sm uppercase shadow hover:bg-gray-100 mt-8",onClick:t[12]||(t[12]=(...e)=>N.logout&&N.logout(...e))}," Déconnexion ")):(0,r.Q3)("",!0)]),N.userLogged?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("div",q,[t[27]||(t[27]=(0,r.Lk)("p",null,"Vous n'avez pas de compte ?",-1)),(0,r.bF)(A,{to:{name:"register"}},{default:(0,r.k6)((()=>t[26]||(t[26]=[(0,r.Lk)("button",{class:"bg-white text-black border border-gray-300 px-4 py-2 text-sm uppercase shadow hover:bg-gray-100 mt-2"}," Créer un compte ",-1)]))),_:1})]))],512),[[s.aG,!a.isMobile&&!a.toggleMobileMenu]])],64)}o(4114),o(4979);var A={name:"SideMenu",props:{links:{type:Array,required:!0},linkRoutes:{type:Object,required:!0}},mounted(){this.checkLogin(),this.isMobile=window.innerWidth<=768,window.addEventListener("resize",this.handleResize)},beforeDestroy(){window.removeEventListener("resize",this.handleResize)},data(){return{isMobile:null,toggleMobileMenu:!1,selectedLink:null,email:"",password:"",error:""}},methods:{handleClick(e){this.selectedLink=e,this.redirectTo(e)},redirectTo(e){this.toggleMobileMenu=!1;const t=this.linkRoutes[e];t?this.$router?this.$router.push({path:t}):window.location.href=t:console.error(`Aucune route trouvée pour le lien: ${e}`)},toggleMenu(){this.toggleMobileMenu=!this.toggleMobileMenu},closeMenu(){this.toggleMobileMenu=!1},async login(){try{const e=await this.$axios.post("/api/auth/login",{email:this.email,password:this.password});if(e.data.token){localStorage.setItem("token",e.data.token);const t=JSON.parse(atob(e.data.token.split(".")[1]));localStorage.setItem("userName",t.username),this.$store.dispatch("login",t.username),this.$router.push("/")}else this.error="Informations invalides"}catch(e){console.error(e),this.error="Erreur lors de la tentative, réessayer plus tard."}},logout(){localStorage.removeItem("token"),localStorage.removeItem("userName"),this.$store.dispatch("logout"),this.selectedLink=null,this.$router.push("/")},checkLogin(){const e=localStorage.getItem("token"),t=localStorage.getItem("userName");e&&t&&this.$store.dispatch("login",t)},forgottenPassword(){this.$router.push({name:"register",query:{passwordReset:"true"}})},handleResize(){const e=window.innerWidth<=768;e!==this.isMobile&&(this.isMobile=e)}},computed:{userLogged(){return this.$store.state.auth.userLogged},userName(){return this.$store.state.auth.userName}}},U=o(1241);const O=(0,U.A)(A,[["render",N],["__scopeId","data-v-66395a07"]]);var F=O,z={name:"App",components:{SideMenu:F},data(){return{links:["Accueil","Compétition en cours","Classement en cours","Archives"],linkRoutes:{Accueil:"/","Compétition en cours":"/ongoing-tour","Classement en cours":"/ongoing-predictions-ranking",Archives:"/archives"},competitionDays:[{day:1,events:["Women -48kg","Men -60kg"]},{day:2,events:["Women -52kg","Men -66kg"]},{day:3,events:["Women -57kg","Men -73kg"]},{day:4,events:["Women -63kg","Men -81kg"]},{day:5,events:["Women -70kg","Men -90kg"]},{day:6,events:["Women -78kg","Men -100kg"]},{day:7,events:["Women +78kg","Men +100kg"]}],competitionId:2926,currentCompetitionDay:null,currentFormattedDate:this.formatDate(new Date),competitions:[],competitionName:null,startingDay:null,endingDay:null,formattedStartingDay:null,formattedEndingDay:null}},mounted(){const e=new Date;this.fetchCompetitionInfos().then((()=>{if(!this.startingDay)return;const t=new Date(this.startingDay),o=e-t,s=Math.floor(o/864e5);s>=0&&s<this.competitionDays.length?this.currentCompetitionDay=s+1:this.currentCompetitionDay=null}))},methods:{setcurrentCompetitionDay(e){this.currentCompetitionDay=e},async fetchCompetitionInfos(){try{const e=await fetch(`https://data.ijf.org/api/get_json?params%5Baction%5D=general.get_one&params%5Bmodule%5D=competition&params%5Bid%5D=${this.competitionId}`),t=await e.json();this.competitionName=t?.title||"Compétition inconnue",this.startingDay=t?.date_from||null,this.endingDay=t?.date_to||null,this.formattedStartingDay=this.formatDate(t?.date_from),this.formattedEndingDay=this.formatDate(t?.date_to)}catch(e){console.error("Erreur lors de la récupération de la compétition :",e),this.competitionName="Erreur lors du chargement"}},formatDate(e){const t="string"===typeof e?new Date(e):e,o=String(t.getDate()).padStart(2,"0"),s=String(t.getMonth()+1).padStart(2,"0"),r=t.getFullYear();return`${o}/${s}/${r}`}},computed:{currentRouteName(){return this.$route?.name||""}}};const T=(0,U.A)(z,[["render",a]]);var V=T,R=o(782),Q={state:{userLogged:!1,userName:""},mutations:{setUser(e,{userName:t}){e.userLogged=!0,e.userName=t},logout(e){e.userLogged=!1,e.userName=""}},actions:{login({commit:e},t){e("setUser",{userName:t})},logout({commit:e}){e("logout")}}},W=(0,R.y$)({state:{user:null},modules:{auth:Q},mutations:{setUser(e,t){e.user=t},logout(e){e.user=null}},actions:{login({commit:e},t){e("setUser",t)},logout({commit:e}){e("logout")}}}),J=o(1387);const B={class:"w-full flex-col text-center"};function K(e,t,o,s,i,n){return(0,r.uX)(),(0,r.CE)("div",B,t[0]||(t[0]=[(0,r.Fv)('<h1 class="lg:text-5xl text-4xl underline custom-blue font-bold lg:py-16 py-8"> Interbudo Pronos </h1><h4 class="text-2xl text-center lg:w-3/4 lg:px-0 px-6 m-auto lg:pb-4 pb-0 underline"> Bienvenue sur la page de pronostiques Interbudo! </h4><div class="pt-2 pb-8 text-lg lg:w-3/4 lg:px-0 px-8 m-auto"><span> Depuis quelques années, au club, un petit jeu s’est installé pendant les Championnats du Monde de Judo. Avec un groupe d’adultes du cours, on s’est pris au jeu des <strong>pronostics quotidiens</strong>, tout au long de la semaine de compétition.<br> Chaque jour, chacun envoyait son <strong>prono du podium</strong> pour les catégories en lice le lendemain. Et selon la justesse des choix, des points étaient attribués. À la fin de la semaine, on faisait les comptes… Et on désignait notre grand gagnant 🏆 !<br></span></div><div class="text-lg lg:w-3/4 lg:px-0 px-8 m-auto"><span> Au départ, on utilisait Google Docs et Google Forms. Simple, oui… mais pas vraiment optimal pour suivre les scores, voir notre classement en direct ou même faire le cumul des points!<br> C’est pour ça que ce petit site a vu le jour : <strong> Automatiser tout ça et rendre l’expérience plus simple pour tout le monde!</strong></span></div><div class="rules-border lg:w-3/4 w-full m-auto my-8 pb-8 lg:px-0 px-4"><h4 class="text-2xl text-center lg:w-1/2 m-auto lg:pt-8 pt-2 pb-0"> 🎯 Comment ça marche ? </h4><div class="pt-2 text-lg m-auto"> - La veille de chaque journée de compétition, vous serez invités à faire vos pronostics pour les catégories du lendemain. <br> - Vous pourrez les envoyer jusqu’à 8h (heure de Paris) le jour même. </div><h4 class="text-2xl text-center lg:w-1/2 m-auto lg:pt-8 pt-4 pb-0"> 🧮 Barème des points : </h4><div class="pt-2 text-lg lg:w-1/2 m-auto"><div class="text-lg m-auto"> - ✅ Un judoka placé à la bonne place : 3 points <br> - ✅ Un judoka présent sur le podium, mais mal placé : 1 point <br> - ❌ Un judoka hors podium : 0 point <br></div></div></div>',5)]))}var G={name:"LandingPage"};const H=(0,U.A)(G,[["render",K]]);var Y=H;const Z={class:"w-full flex-col text-center"},ee={class:"lg:text-5xl text-3xl underline custom-blue font-bold lg:py-16 py-8"},te={class:"lg:text-3xl text-2xl underline custom-blue font-bold lg:pt-4 lg:pb-8 pb-8 pt-2"},oe={class:"text-2xl text-center lg:w-1/2 lg:px-0 px-6 m-auto lg:pb-6 pb-0"},se={class:"button-container mb-4"},re=["onClick"],ie={key:0,class:"container"},ne={class:"day-title mb-1 mt-8"},ae={key:0,class:"my-4 p-4 text-center"},le={key:1,class:"my-4 p-4 text-center text-red-500"},ce={key:2,class:"prediction-container my-4"},ue={class:"text-sm text-gray-600 mt-2"},de={class:"pb-2 flex flex-col mt-4 ml-4"},pe=["for"],me=["id","onUpdate:modelValue","disabled"],ge=["value"],be={class:"pb-2 flex flex-col mt-4 ml-4"},he=["for"],ye=["id","onUpdate:modelValue","disabled"],ve=["value"],fe=["disabled"];function ke(e,t,o,n,a,l){return(0,r.uX)(),(0,r.CE)("div",Z,[(0,r.Lk)("h1",ee,(0,i.v_)(o.competitionName),1),(0,r.Lk)("div",null,[(0,r.Lk)("div",te,[o.currentCompetitionDay&&o.competitionDays[o.currentCompetitionDay-1]?((0,r.uX)(),(0,r.CE)(r.FK,{key:0},[(0,r.eW)(" En cours - Jour "+(0,i.v_)(o.currentCompetitionDay)+" : "+(0,i.v_)(o.competitionDays[o.currentCompetitionDay-1].events[0])+" & "+(0,i.v_)(o.competitionDays[o.currentCompetitionDay-1].events[1]),1)],64)):((0,r.uX)(),(0,r.CE)(r.FK,{key:1},[(0,r.eW)(" Début le "+(0,i.v_)(o.formattedStartingDay)+" et fin le "+(0,i.v_)(o.formattedEndingDay),1)],64))])]),(0,r.Lk)("div",oe,[(0,r.Lk)("div",se,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(a.days,(e=>((0,r.uX)(),(0,r.CE)("button",{key:e,class:(0,i.C4)(["btn p-2 mr-1 mb-1",a.selectedDay===e?"bg-blue-500":""]),onClick:t=>l.selectDay(e)}," Jour "+(0,i.v_)(e),11,re)))),128))]),a.selectedDay?((0,r.uX)(),(0,r.CE)("div",ie,[(0,r.Lk)("div",ne,(0,i.v_)(a.womenEvent)+" & "+(0,i.v_)(a.menEvent),1),a.loading?((0,r.uX)(),(0,r.CE)("div",ae,t[2]||(t[2]=[(0,r.Lk)("p",null,"Chargement des données en cours...",-1)]))):e.error?((0,r.uX)(),(0,r.CE)("div",le,[(0,r.Lk)("p",null,(0,i.v_)(e.error),1),(0,r.Lk)("button",{class:"btn my-2 px-4 py-1",onClick:t[0]||(t[0]=e=>l.loadCompetitorsData(a.selectedDay))}," Réessayer ")])):((0,r.uX)(),(0,r.CE)("div",ce,[(0,r.Lk)("div",ue,(0,i.v_)(a.predictions[a.selectedDay].women[0].options.length)+" judokas femmes et "+(0,i.v_)(a.predictions[a.selectedDay].men[0].options.length)+" judokas hommes disponibles ",1),t[5]||(t[5]=(0,r.Lk)("div",{class:"text-xl mt-4 underline lg:mx-0 mx-4"}," 🕒 Pronostic ouvert : de la veille jusqu’à 8h (heure de Paris) le jour de la catégorie. ",-1)),(0,r.Lk)("div",{class:(0,i.C4)("women-prediction text-2xl mt-5 mb-2 ml-5 flex align-left bold underline "+(a.isMobile?"justify-center text-2xl":""))}," Pronostics Femmes: ",2),(0,r.Lk)("div",de,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(a.predictions[a.selectedDay].women,((e,o)=>((0,r.uX)(),(0,r.CE)("div",{key:o,class:(0,i.C4)(a.isMobile?"flex flex-col m-auto":"flex flex-row my-2")},[(0,r.Lk)("label",{for:"womenPlace"+o,class:"mx-4 text-xl underline"},(0,i.v_)(e.label),9,pe),(0,r.bo)((0,r.Lk)("select",{id:"womenPlace"+o,class:(0,i.C4)(["prediction-select text-black px-2 lg:w-1/2",{"ml-3":!a.isMobile&&0===o,"my-2":a.isMobile}]),"onUpdate:modelValue":t=>e.value=t,required:"",disabled:!l.isCategoryActive(a.categoryMapping[a.selectedDay].women)||l.isCategoryPredicted(a.categoryMapping[a.selectedDay].women)},[t[3]||(t[3]=(0,r.Lk)("option",{value:"",disabled:""},"Choisissez une judoka",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.getWomenAvailableOptions(o),((e,t)=>((0,r.uX)(),(0,r.CE)("option",{key:t,value:e},(0,i.v_)(e),9,ge)))),128))],10,me),[[s.u1,e.value]])],2)))),128))]),(0,r.Lk)("div",{class:(0,i.C4)("men-prediction text-2xl mt-5 mb-2 ml-4 flex align-left bold underline "+(a.isMobile?"justify-center text-2xl":""))}," Pronostics Hommes: ",2),(0,r.Lk)("div",be,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(a.predictions[a.selectedDay].men,((e,o)=>((0,r.uX)(),(0,r.CE)("div",{key:o,class:(0,i.C4)(a.isMobile?"flex flex-col m-auto":"flex flex-row my-2")},[(0,r.Lk)("label",{for:"menPlace"+o,class:"mx-4 text-xl underline"},(0,i.v_)(e.label),9,he),(0,r.bo)((0,r.Lk)("select",{id:"menPlace"+o,class:(0,i.C4)(["prediction-select text-black px-2 lg:w-1/2",{"ml-3":!a.isMobile&&0===o,"my-2":a.isMobile}]),"onUpdate:modelValue":t=>e.value=t,required:"",disabled:!l.isCategoryActive(a.categoryMapping[a.selectedDay].men)||l.isCategoryPredicted(a.categoryMapping[a.selectedDay].men)},[t[4]||(t[4]=(0,r.Lk)("option",{value:"",disabled:""},"Choisissez un judoka",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.getMenAvailableOptions(o),((e,t)=>((0,r.uX)(),(0,r.CE)("option",{key:t,value:e},(0,i.v_)(e),9,ve)))),128))],10,ye),[[s.u1,e.value]])],2)))),128))]),(0,r.Lk)("button",{class:(0,i.C4)(["btn my-4 px-4 py-1",l.isValidForm&&l.hasActiveCategories?"bg-blue-500":"bg-gray-400"]),disabled:!l.isValidForm||!l.hasActiveCategories,onClick:t[1]||(t[1]=(...e)=>l.validatePrediction&&l.validatePrediction(...e))}," Je valide! ",10,fe),l.predictionMessage?((0,r.uX)(),(0,r.CE)("div",{key:0,class:(0,i.C4)([{"text-green-500":a.predictionSubmitted,"text-red-500":!a.predictionSubmitted&&!l.isValidForm,"text-blue-500":!a.predictionSubmitted&&l.isValidForm},"my-4 lg:mx-0 mx-4"])},(0,i.v_)(l.predictionMessage),3)):(0,r.Q3)("",!0)]))])):(0,r.Q3)("",!0)])])}o(8992),o(3215),o(4520),o(3949),o(1454),o(8872),o(7550);var xe={name:"OnGoingTour",props:{competitionDays:{type:Object,required:!0},currentCompetitionDay:{type:Number,required:!0},competitionId:{type:Number,required:!0},currentFormattedDate:{type:Number,required:!0},competitionName:{type:String,required:!0},formattedStartingDay:{type:String,required:!0},formattedEndingDay:{type:String,required:!0}},data(){return{isMobile:!1,menEvent:null,womenEvent:null,days:[1,2,3,4,5,6,7],selectedDay:null,predictions:{1:{women:[{label:"1ère place:",value:"",options:[]},{label:"2ème place:",value:"",options:[]},{label:"3ème place:",value:"",options:[]},{label:"3ème place:",value:"",options:[]}],men:[{label:"1ère place:",value:"",options:[]},{label:"2ème place:",value:"",options:[]},{label:"3ème place:",value:"",options:[]},{label:"3ème place:",value:"",options:[]}]},2:{women:[{label:"1ère place:",value:"",options:[]},{label:"2ème place:",value:"",options:[]},{label:"3ème place:",value:"",options:[]},{label:"3ème place:",value:"",options:[]}],men:[{label:"1ère place:",value:"",options:[]},{label:"2ème place:",value:"",options:[]},{label:"3ème place:",value:"",options:[]},{label:"3ème place:",value:"",options:[]}]},3:{women:[{label:"1ère place:",value:"",options:[]},{label:"2ème place:",value:"",options:[]},{label:"3ème place:",value:"",options:[]},{label:"3ème place:",value:"",options:[]}],men:[{label:"1ère place:",value:"",options:[]},{label:"2ème place:",value:"",options:[]},{label:"3ème place:",value:"",options:[]},{label:"3ème place:",value:"",options:[]}]},4:{women:[{label:"1ère place:",value:"",options:[]},{label:"2ème place:",value:"",options:[]},{label:"3ème place:",value:"",options:[]},{label:"3ème place:",value:"",options:[]}],men:[{label:"1ère place:",value:"",options:[]},{label:"2ème place:",value:"",options:[]},{label:"3ème place:",value:"",options:[]},{label:"3ème place:",value:"",options:[]}]},5:{women:[{label:"1ère place:",value:"",options:[]},{label:"2ème place:",value:"",options:[]},{label:"3ème place:",value:"",options:[]},{label:"3ème place:",value:"",options:[]}],men:[{label:"1ère place:",value:"",options:[]},{label:"2ème place:",value:"",options:[]},{label:"3ème place:",value:"",options:[]},{label:"3ème place:",value:"",options:[]}]},6:{women:[{label:"1ère place:",value:"",options:[]},{label:"2ème place:",value:"",options:[]},{label:"3ème place:",value:"",options:[]},{label:"3ème place:",value:"",options:[]}],men:[{label:"1ère place:",value:"",options:[]},{label:"2ème place:",value:"",options:[]},{label:"3ème place:",value:"",options:[]},{label:"3ème place:",value:"",options:[]}]},7:{women:[{label:"1ère place:",value:"",options:[]},{label:"2ème place:",value:"",options:[]},{label:"3ème place:",value:"",options:[]},{label:"3ème place:",value:"",options:[]}],men:[{label:"1ère place:",value:"",options:[]},{label:"2ème place:",value:"",options:[]},{label:"3ème place:",value:"",options:[]},{label:"3ème place:",value:"",options:[]}]}},apiBaseUrl:"https://data.ijf.org/api/get_json",loading:!1,categoryMapping:{1:{men:1,women:8},2:{men:2,women:9},3:{men:3,women:10},4:{men:4,women:11},5:{men:5,women:12},6:{men:6,women:13},7:{men:7,women:14}},predictionSubmitted:!1}},mounted(){this.checkMobile(),window.addEventListener("resize",this.checkMobile)},beforeDestroy(){window.removeEventListener("resize",this.checkMobile)},methods:{checkMobile(){this.isMobile=window.innerWidth<=768},async selectDay(e){this.selectedDay=e,this.womenEvent=this.competitionDays[e-1].events[0],this.menEvent=this.competitionDays[e-1].events[1];const t=localStorage.getItem("token");if(t)if(this.competitionId){try{const o=await fetch(`http://localhost:5000/api/predictions/${this.competitionId}/${e}`,{method:"GET",headers:{Authorization:`Bearer ${t}`}});if(o.ok){const e=await o.json();console.log(e.message),this.predictionObject=e.prediction,this.predictionSubmitted=!0}else this.predictionObject=null,this.predictionSubmitted=!1}catch(o){console.error("Erreur réseau:",o)}this.loadCompetitorsData(e)}else console.error("competitionId manquant. Impossible de vérifier les prédictions.");else console.error("Token manquant. Veuillez vous connecter.")},async loadCompetitorsData(e){if(e&&this.categoryMapping[e]){this.loading=!0,this.error=null;try{const o=this.categoryMapping[e].men,s=this.categoryMapping[e].women;try{const[t,r]=await Promise.all([this.fetchCompetitors(o),this.fetchCompetitors(s)]);this.processCompetitorsData(e,"men",t),this.processCompetitorsData(e,"women",r)}catch(t){console.error(`Erreur lors du chargement des données pour le jour ${e}:`,t),this.error=`Impossible de charger les données: ${t.message}`}finally{this.loading=!1}}catch(t){console.error("Erreur lors du chargement des données:",t),this.error="Une erreur s'est produite lors du chargement des données."}this.loading=!1}},async fetchCompetitors(e){const t=`${this.apiBaseUrl}?access_token=&params%5Baction%5D=competition.competitors&params%5Bid_competition%5D=${this.competitionId}&params%5Bid_weight%5D=${e}`,o=await fetch(t);if(!o.ok)throw new Error(`Erreur HTTP ! Statut : ${o.status}`);const s=await o.json();return s},processCompetitorsData(e,t,o){const s=this.categoryMapping[e][t],r="men"===t?1:2,i=o.categories?.[r]?.[s];if(!i||!i.persons)return void console.error(`Données invalides pour ${t} jour ${e}`);const n=Object.values(i.persons).sort(((e,t)=>(e.ranking_place||1/0)-(t.ranking_place||1/0))).map((e=>{const t=e.family_name||"",o=e.given_name||"",s=e.country_short||"";return`${t.toUpperCase()} ${o} (${s})`}));this.predictions[e][t].forEach((e=>{e.options=n}))},getMenAvailableOptions(e){const t=this.predictions[this.selectedDay].men.map(((t,o)=>o!==e?t.value:null)).filter((e=>e));return this.predictions[this.selectedDay].men[e].options.filter((e=>!t.includes(e)))},getWomenAvailableOptions(e){const t=this.predictions[this.selectedDay].women.map(((t,o)=>o!==e?t.value:null)).filter((e=>e));return this.predictions[this.selectedDay].women[e].options.filter((e=>!t.includes(e)))},async validatePrediction(){const e=this.predictions[this.selectedDay].women.reduce(((e,t,o)=>{const s=["FirstPlace","SecondPlace","ThirdPlace1","ThirdPlace2"];return e[`women${s[o]}`]=t.value||"",e}),{}),t=this.predictions[this.selectedDay].men.reduce(((e,t,o)=>{const s=["FirstPlace","SecondPlace","ThirdPlace1","ThirdPlace2"];return e[`men${s[o]}`]=t.value||"",e}),{});this.predictionObject={...e,...t};const o=localStorage.getItem("token");if(o)try{const e=this.predictionSubmitted?"PUT":"POST",t=await fetch("http://localhost:5000/api/predictions",{method:e,headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify({predictions:this.predictionObject,competitionDay:this.selectedDay,competitionId:this.competitionId,date:(new Date).toISOString().split("T")[0]})});if(!t.ok){const e=await t.text();return void console.warn("Erreur côté backend :",e)}await t.json();this.predictionSubmitted=!0}catch(s){console.error("Erreur réseau :",s)}else console.error("Token manquant. Veuillez vous connecter.")},isCategoryActive(e){const t=new Date("2025-04-22T09:00:00"),o={"1,2,8,9":"2025-04-23T08:00:00","3,10,11":"2025-04-24T08:00:00","12,4,5":"2025-04-25T08:00:00","13,14,6,7":"2025-04-26T08:00:00"};for(const[s,r]of Object.entries(o))if(s.split(",").includes(String(e))){const o=new Date(r),s=new Date(o);if(s.setDate(o.getDate()-1),s.setHours(8,0,0,0),t>=s&&t<o)return console.log(`Catégorie ${e} est active.`),!0}return!1},isCategoryPredicted(e){if(!this.predictionObject||!this.predictionObject.predictions)return!1;const t=this.predictionObject.predictions;return 4===e?!!t.menFirstPlace:5===e?!!t.menSecondPlace:6===e?!!t.menThirdPlace1:7===e?!!t.menThirdPlace2:12===e?!!t.womenFirstPlace:13===e?!!t.womenSecondPlace:14===e&&!!t.womenThirdPlace1}},computed:{hasActiveCategories(){const e=this.predictions[this.selectedDay]?.women.some(((e,t)=>this.isCategoryActive(this.categoryMapping[this.selectedDay].women)&&!this.isCategoryPredicted(this.categoryMapping[this.selectedDay].women))),t=this.predictions[this.selectedDay]?.men.some(((e,t)=>this.isCategoryActive(this.categoryMapping[this.selectedDay].men)&&!this.isCategoryPredicted(this.categoryMapping[this.selectedDay].men)));return e||t},isValidForm(){const e=this.predictions[this.selectedDay]?.women.every(((e,t)=>!this.isCategoryActive(this.categoryMapping[this.selectedDay].women)||this.isCategoryPredicted(this.categoryMapping[this.selectedDay].women)||e.value)),t=this.predictions[this.selectedDay]?.men.every(((e,t)=>!this.isCategoryActive(this.categoryMapping[this.selectedDay].men)||this.isCategoryPredicted(this.categoryMapping[this.selectedDay].men)||e.value));return e&&t},predictionMessage(){return this.predictionSubmitted?"Pronostique déjà effectué pour ce jour.":this.isValidForm?this.hasActiveCategories?"Vous pouvez soumettre votre pronostic.":"Les pronostics ne sont pas encore ouverts pour cette catégorie.":"Veuillez remplir tous les champs pour valider votre pronostic."}}};const we=(0,U.A)(xe,[["render",ke]]);var Ce=we;const Le={class:"w-full flex-col text-center"},Ee={class:"lg:text-5xl text-4xl underline custom-blue font-bold lg:py-16 pt-8 lg:mx-0 mx-1"},De={class:"lg:text-3xl text-2xl underline custom-blue font-bold lg:pt-4 py-8"},Pe={class:"text-2xl text-center lg:w-1/2 lg:px-0 px-6 m-auto lg:pb-6 pb-0"},Me={key:0,class:"text-red-500 mt-4"},_e={class:"w-full border-collapse border border-gray-300 lg:text-lg text-base text-center font-bold"},Se={class:"border border-gray-300 px-2 lg:px-4 py-1 lg:py-2 w-1/12 lg:w-1/12"},Xe={class:"border border-gray-300 px-2 lg:px-4 py-1 lg:py-2 w-6/12 lg:w-7/12"},$e={class:"border border-gray-300 px-2 lg:px-4 py-1 lg:py-2 w-5/12 lg:w-4/12"};function je(e,t,o,s,n,a){return(0,r.uX)(),(0,r.CE)("div",Le,[(0,r.Lk)("h1",Ee,(0,i.v_)(o.competitionName),1),(0,r.Lk)("div",De," du "+(0,i.v_)(o.formattedStartingDay)+" au "+(0,i.v_)(o.formattedEndingDay),1),(0,r.Lk)("div",Pe,[t[1]||(t[1]=(0,r.Lk)("div",{class:"day-title mb-1 lg:mt-8 mt-6"},"Classement en cours",-1)),0===n.leaderboard.length?((0,r.uX)(),(0,r.CE)("div",Me," Aucun résultat à afficher pour le moment. ")):((0,r.uX)(),(0,r.CE)("div",{key:1,class:(0,i.C4)((n.isMobile?"":"mx-4")+" mt-10 flex align-left")},[(0,r.Lk)("table",_e,[t[0]||(t[0]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",{class:"border border-gray-300 px-2 lg:px-4 py-1 lg:py-2 bg-gray-100 w-1/12 lg:w-1/12"}," Position "),(0,r.Lk)("th",{class:"border border-gray-300 px-2 lg:px-4 py-1 lg:py-2 bg-gray-100 w-6/12 lg:w-7/12"}," Utilisateur "),(0,r.Lk)("th",{class:"border border-gray-300 px-2 lg:px-4 py-1 lg:py-2 bg-gray-100 w-5/12 lg:w-4/12"}," Points cumulés ")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.leaderboard,((e,t)=>((0,r.uX)(),(0,r.CE)("tr",{key:t},[(0,r.Lk)("td",Se,(0,i.v_)(t+1),1),(0,r.Lk)("td",Xe,(0,i.v_)(e.username),1),(0,r.Lk)("td",$e,(0,i.v_)(e.points)+" pts ",1)])))),128))])])],2))])])}o(2577),o(670);var Ie={name:"OnGoingPredictionsRanking",props:{competitionDays:{type:Object,required:!0},currentCompetitionDay:{type:Number,required:!0},competitionName:{type:String,required:!0},competitionId:{type:Number,required:!0},formattedStartingDay:{type:String,required:!0},formattedEndingDay:{type:String,required:!0}},data(){return{isMobile:null,results:{},leaderboard:[],users:[]}},mounted(){this.checkMobile(),window.addEventListener("resize",this.checkMobile),this.fetchUserPredictions().then((()=>{this.fetchResults().then((()=>{this.calculateUserScores()}))}))},beforeDestroy(){window.removeEventListener("resize",this.checkMobile)},methods:{checkMobile(){this.isMobile=window.innerWidth<=768},async fetchUserPredictions(){const e=localStorage.getItem("token");if(!e)return console.error("Token manquant. Veuillez vous connecter."),void(this.users=[]);try{const t=await fetch(`http://localhost:5000/api/predictions?competitionId=${this.competitionId}`,{method:"GET",headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw new Error(`Erreur lors de la récupération des prédictions : ${t.statusText}`);const o=await t.json();this.users=o.map((e=>{if(!e||!e.username)return console.error("Prédiction invalide ou utilisateur manquant :",e),null;const t=this.competitionDays[e.competitionDay-1];return t?{username:e.username,predictions:t.events.map(((t,o)=>({event:t,firstPlace:e.predictions[0===o?"womenFirstPlace":"menFirstPlace"]||"",secondPlace:e.predictions[0===o?"womenSecondPlace":"menSecondPlace"]||"",thirdPlace1:e.predictions[0===o?"womenThirdPlace1":"menThirdPlace1"]||"",thirdPlace2:e.predictions[0===o?"womenThirdPlace2":"menThirdPlace2"]||""})))}:(console.error(`Aucun événement trouvé pour competitionDay ${e.competitionDay}`),null)})).filter(Boolean)}catch(t){console.error("Erreur lors de la récupération des prédictions :",t),this.users=[]}},async fetchResults(){const e={},t=JSON.parse(localStorage.getItem("competitionResults"))||{},o=Object.values(this.competitionDays).flatMap((e=>e.events.map((e=>this.getWeightId(e))))).filter(Boolean),s=o.map((async o=>{if(t[`${this.competitionId}-${o}`])e[o]=t[`${this.competitionId}-${o}`];else try{const s=await fetch(`https://data.ijf.org/api/get_json?access_token=&params%5Baction%5D=competition.competitors&params%5Bid_competition%5D=${this.competitionId}&params%5Bid_weight%5D=${o}`),r=await s.json(),i=r.categories?.[Object.keys(r.categories)[0]]?.[o],n=Object.values(i?.persons||{}),a=n.filter((e=>null!==e.place));a.length>0&&(e[o]=a,t[`${this.competitionId}-${o}`]=a)}catch(s){console.error(`Erreur lors de la récupération des résultats pour weightId ${o}:`,s)}}));await Promise.all(s),localStorage.setItem("competitionResults",JSON.stringify(t));for(const r of this.competitionDays)for(const t of r.events){const o=this.getWeightId(t);o&&e[o]&&(this.results[t]=e[o])}},getWeightId(e){const t={"Men -60kg":1,"Men -66kg":2,"Men -73kg":3,"Men -81kg":4,"Men -90kg":5,"Men -100kg":6,"Men +100kg":7,"Women -48kg":8,"Women -52kg":9,"Women -57kg":10,"Women -63kg":11,"Women -70kg":12,"Women -78kg":13,"Women +78kg":14};return t[e]||null},calculateUserScores(){if(!Array.isArray(this.users)||0===this.users.length)return console.warn("Aucun utilisateur trouvé pour calculer les scores."),void(this.leaderboard=[]);const e=new Map;for(const t of this.users){if(!t||!t.username||!Array.isArray(t.predictions)){console.error("Utilisateur ou prédictions invalides :",t);continue}let o=0;for(const e of t.predictions){const t=this.results[e.event];if(!t)continue;const s={firstPlace:t.find((e=>"1"===e.place))?`${t.find((e=>"1"===e.place)).family_name} ${t.find((e=>"1"===e.place)).given_name}`:null,secondPlace:t.find((e=>"2"===e.place))?`${t.find((e=>"2"===e.place)).family_name} ${t.find((e=>"2"===e.place)).given_name}`:null,thirdPlace:t.filter((e=>"3"===e.place)).map((e=>`${e.family_name} ${e.given_name}`))};if(!s.firstPlace&&!s.secondPlace&&0===s.thirdPlace.length)continue;const r={firstPlace:this.normalizeName(e.firstPlace),secondPlace:this.normalizeName(e.secondPlace),thirdPlace:[this.normalizeName(e.thirdPlace1),this.normalizeName(e.thirdPlace2)]};Object.keys(r).forEach((e=>{"thirdPlace"===e?r[e].forEach((e=>{s.thirdPlace.includes(e)&&(o+=3)})):r[e]===s[e]&&(o+=3)}))}e.has(t.username)?e.set(t.username,e.get(t.username)+o):e.set(t.username,o)}this.leaderboard=Array.from(e.entries()).map((([e,t])=>({username:e,points:t}))).sort(((e,t)=>t.points-e.points))},normalizeName(e){return e.replace(/\s*\(.*?\)\s*/g,"").trim()}},computed:{}};const qe=(0,U.A)(Ie,[["render",je]]);var Ne=qe;const Ae={class:"lg:w-full flex-col text-center"},Ue={class:"text-2xl text-left lg:my-4 lg:mx-20"},Oe=["onClick"],Fe={class:"font-bold text-2xl underline"},ze={class:"lg:w-full w-auto text-left border-collapse border border-gray-300 my-6"},Te={class:"border w-1/8 border-gray-300 px-4 py-2 text-center"},Ve={class:"border w-3/8 border-gray-300 px-4 py-2 text-center"},Re={class:"border w-3/8 border-gray-300 px-4 py-2 text-center"};function Qe(e,t,o,s,n,a){return(0,r.uX)(),(0,r.CE)("div",Ae,[t[1]||(t[1]=(0,r.Lk)("h1",{class:"lg:text-5xl text-4xl underline custom-blue font-bold lg:py-16 py-8"}," Interbudo Pronos ",-1)),t[2]||(t[2]=(0,r.Lk)("h4",{class:"text-2xl text-center lg:w-1/2 lg:px-0 px-6 m-auto lg:pb-6 pb-4"}," Ici seront archivés les précédents pronostiques qui auront eu lieu: ",-1)),(0,r.Lk)("div",Ue,[(0,r.Lk)("ul",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.archivedCompetitions,((e,o)=>((0,r.uX)(),(0,r.CE)("li",{key:e.competitionId,class:"event-item"},[(0,r.Lk)("div",{onClick:e=>a.toggleEvent(o),class:"custom-bg-blue rounded-lg text-white event-title bold cursor-pointer bg-gray-200 lg:mx-0 mx-5 my-3 py-2 pl-4 flex justify-between items-center"},[(0,r.Lk)("span",null,[(0,r.Lk)("span",Fe,(0,i.v_)(e.title),1),(0,r.eW)(" du "+(0,i.v_)(e.date_from)+" au "+(0,i.v_)(e.date_to),1)]),(0,r.Lk)("span",{class:(0,i.C4)([n.activeEventIndex===o?"rotate-180":"","transition-transform duration-300 lg:mr-6 mr-4"])}," ▼ ",2)],8,Oe),n.activeEventIndex===o?((0,r.uX)(),(0,r.CE)("div",{key:0,class:(0,i.C4)((n.isMobile?"flex justify-center":"")+" event-details transition-all duration-300 overflow-hidden")},[(0,r.Lk)("div",null,[(0,r.Lk)("table",ze,[t[0]||(t[0]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",{class:"border w-1/8 text-base border-gray-300 px-4 py-2 bg-gray-100"}," Position "),(0,r.Lk)("th",{class:"border w-3/8 text-base border-gray-300 px-4 py-2 bg-gray-100"}," Utilisateur "),(0,r.Lk)("th",{class:"border w-3/8 text-base border-gray-300 px-4 py-2 bg-gray-100"}," Points cumulés ")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.leaderboard,((e,t)=>((0,r.uX)(),(0,r.CE)("tr",{key:t},[(0,r.Lk)("td",Te,(0,i.v_)(t+1),1),(0,r.Lk)("td",Ve,(0,i.v_)(e.username),1),(0,r.Lk)("td",Re,(0,i.v_)(e.points)+" pts ",1)])))),128))])])])],2)):(0,r.Q3)("",!0)])))),128))])])])}var We={name:"Archives",data(){return{archivedCompetitions:[],activeEventIndex:null,isMobile:!1}},mounted(){this.isMobile=window.innerWidth<=768,window.addEventListener("resize",this.checkMobile),this.fetchArchivedCompetitions()},methods:{async fetchArchivedCompetitions(){try{const e=await fetch("http://localhost:5000/api/archived-competitions");if(!e.ok)throw new Error("Erreur lors de la récupération des compétitions archivées");this.archivedCompetitions=await e.json()}catch(e){console.error(e)}},toggleEvent(e){this.activeEventIndex=this.activeEventIndex===e?null:e}}};const Je=(0,U.A)(We,[["render",Qe],["__scopeId","data-v-3754d94f"]]);var Be=Je;const Ke={key:0,class:"bg-gray-200 min-h-screen flex items-center justify-center"},Ge={class:"register-container bg-gray-200 w-full min-h-screen md:bg-white md:max-w-[400px] md:rounded-lg md:shadow-lg px-10 py-10"},He={key:0,class:"text-2xl lg:mt-0 mt-8 pb-4"},Ye={key:1,class:"text-2xl lg:mt-0 mt-8 pb-4"},Ze={key:2,class:"text-2xl lg:mt-0 mt-8 pb-4"},et={class:"pb-2"},tt={key:0,class:"error font-bold text-red-600 pb-2"},ot={key:1,class:"pb-4 mt-6 font-bold text-green-500"},st={class:"pb-2"},rt={key:0,class:"error mt-4"},it={key:1,class:"success mt-4 font-bold text-green-500"},nt={key:0,class:"error font-bold pb-4"},at={key:1,class:"success pb-4 font-bold text-green-500"},lt={key:1,class:"w-full min-h-screen flex items-center justify-center text-center"},ct={class:"register-container bg-gray-200 w-full px-10 py-10"},ut={key:0,class:"text-2xl pb-4"},dt={key:1,class:"text-2xl pb-4"},pt={key:2,class:"text-2xl pb-4"},mt={class:"pb-2 flex flex-col"},gt={key:0,class:"error font-bold text-red-600 pb-2"},bt={key:1,class:"pb-4 mt-6 font-bold text-green-500"},ht={class:"pb-2 flex flex-col"},yt={class:"pb-2 flex flex-col"},vt={key:0,class:"error mt-4"},ft={key:1,class:"success mt-4 font-bold text-green-500"},kt={key:0,class:"error font-bold pb-4"},xt={key:1,class:"success pb-4 font-bold text-green-500"};function wt(e,t,o,n,a,l){return(0,r.uX)(),(0,r.CE)(r.FK,null,[a.isMobile?((0,r.uX)(),(0,r.CE)("div",Ke,[(0,r.Lk)("div",Ge,[o.passwordReset?((0,r.uX)(),(0,r.CE)("h1",He," Réinitialisation du mot de passe ")):o.resetPassword?((0,r.uX)(),(0,r.CE)("h1",Ye," Définir un nouveau mot de passe ")):((0,r.uX)(),(0,r.CE)("h1",Ze,"Créer un compte")),o.passwordReset?((0,r.uX)(),(0,r.CE)("form",{key:3,onSubmit:t[1]||(t[1]=(0,s.D$)(((...e)=>l.requestPasswordReset&&l.requestPasswordReset(...e)),["prevent"]))},[(0,r.Lk)("div",et,[t[18]||(t[18]=(0,r.Lk)("label",{for:"email",class:"text-xl"},"Votre Email:",-1)),(0,r.bo)((0,r.Lk)("input",{type:"email",class:"log-input text-black px-2 self-center mt-2 mb-4 text-center","onUpdate:modelValue":t[0]||(t[0]=e=>a.email=e),required:""},null,512),[[s.Jo,a.email]])]),a.error?((0,r.uX)(),(0,r.CE)("p",tt,(0,i.v_)(a.error),1)):(0,r.Q3)("",!0),t[19]||(t[19]=(0,r.Lk)("button",{type:"submit",class:"custom-bg-blue text-white px-4 py-2 rounded-md"}," Envoyer le mail de réinitialisation ",-1)),a.emailSent?((0,r.uX)(),(0,r.CE)("div",ot," Un mail de réinitialisation de mot de passe vous a été envoyé ")):(0,r.Q3)("",!0)],32)):o.resetPassword?((0,r.uX)(),(0,r.CE)("form",{key:4,onSubmit:t[3]||(t[3]=(0,s.D$)(((...e)=>l.resetPasswordSubmit&&l.resetPasswordSubmit(...e)),["prevent"]))},[(0,r.Lk)("div",st,[t[20]||(t[20]=(0,r.Lk)("label",{for:"newPassword",class:"text-xl"},"Nouveau mot de passe:",-1)),(0,r.bo)((0,r.Lk)("input",{type:"password",id:"newPassword","onUpdate:modelValue":t[2]||(t[2]=e=>a.newPassword=e),required:"",class:"log-input text-black px-2 self-center mt-2 mb-4 text-center"},null,512),[[s.Jo,a.newPassword]])]),t[21]||(t[21]=(0,r.Lk)("button",{type:"submit",class:"custom-bg-blue text-white px-4 py-2 rounded-md"}," Mettre à jour le mot de passe ",-1)),a.error?((0,r.uX)(),(0,r.CE)("p",rt,(0,i.v_)(a.error),1)):(0,r.Q3)("",!0),a.success?((0,r.uX)(),(0,r.CE)("p",it,(0,i.v_)(a.success),1)):(0,r.Q3)("",!0)],32)):((0,r.uX)(),(0,r.CE)("form",{key:5,onSubmit:t[7]||(t[7]=(0,s.D$)(((...e)=>l.register&&l.register(...e)),["prevent"]))},[t[22]||(t[22]=(0,r.Lk)("label",{class:"text-xl font-bold pb-10"},"Nom:",-1)),(0,r.bo)((0,r.Lk)("input",{class:"text-center mt-2 mb-4",type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>a.username=e),required:""},null,512),[[s.Jo,a.username]]),t[23]||(t[23]=(0,r.Lk)("label",{class:"text-xl font-bold pb-10"},"Email:",-1)),(0,r.bo)((0,r.Lk)("input",{class:"text-center mt-2 mb-4",type:"email","onUpdate:modelValue":t[5]||(t[5]=e=>a.email=e),required:""},null,512),[[s.Jo,a.email]]),t[24]||(t[24]=(0,r.Lk)("label",{class:"text-xl font-bold pb-10"},"Mot de passe:",-1)),(0,r.bo)((0,r.Lk)("input",{class:"text-center mt-2 mb-4",type:"password","onUpdate:modelValue":t[6]||(t[6]=e=>a.password=e),required:""},null,512),[[s.Jo,a.password]]),a.error?((0,r.uX)(),(0,r.CE)("p",nt,(0,i.v_)(a.error),1)):(0,r.Q3)("",!0),a.success?((0,r.uX)(),(0,r.CE)("p",at,(0,i.v_)(a.success),1)):(0,r.Q3)("",!0),t[25]||(t[25]=(0,r.Lk)("button",{class:"custom-bg-blue text-white px-4 py-2 rounded-md",type:"submit"}," S'inscrire ",-1))],32))])])):(0,r.Q3)("",!0),a.isMobile?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("div",lt,[(0,r.Lk)("div",ct,[o.passwordReset?((0,r.uX)(),(0,r.CE)("h1",ut," Réinitialisation du mot de passe ")):o.resetPassword?((0,r.uX)(),(0,r.CE)("h1",dt," Définir un nouveau mot de passe ")):((0,r.uX)(),(0,r.CE)("h1",pt,"Créer un compte")),o.passwordReset?((0,r.uX)(),(0,r.CE)("form",{key:3,onSubmit:t[9]||(t[9]=(0,s.D$)(((...e)=>l.requestPasswordReset&&l.requestPasswordReset(...e)),["prevent"]))},[(0,r.Lk)("div",mt,[t[26]||(t[26]=(0,r.Lk)("label",{for:"email",class:"mb-2 text-xl"},"Votre Email:",-1)),(0,r.bo)((0,r.Lk)("input",{type:"email",class:"log-input text-black px-2 self-center mt-2 mb-4 text-center","onUpdate:modelValue":t[8]||(t[8]=e=>a.email=e),required:""},null,512),[[s.Jo,a.email]])]),a.error?((0,r.uX)(),(0,r.CE)("p",gt,(0,i.v_)(a.error),1)):(0,r.Q3)("",!0),t[27]||(t[27]=(0,r.Lk)("button",{type:"submit",class:"custom-bg-blue text-white px-4 py-2 rounded-md"}," Envoyer le mail de réinitialisation ",-1)),a.emailSent?((0,r.uX)(),(0,r.CE)("div",bt," Un mail de réinitialisation de mot de passe vous a été envoyé ")):(0,r.Q3)("",!0)],32)):o.resetPassword?((0,r.uX)(),(0,r.CE)("form",{key:4,onSubmit:t[12]||(t[12]=(0,s.D$)(((...e)=>l.resetPasswordSubmit&&l.resetPasswordSubmit(...e)),["prevent"]))},[(0,r.Lk)("div",ht,[t[28]||(t[28]=(0,r.Lk)("label",{for:"newPassword",class:"mb-2 font-bold text-xl"},"Nouveau mot de passe:",-1)),(0,r.bo)((0,r.Lk)("input",{type:"password",id:"newPassword","onUpdate:modelValue":t[10]||(t[10]=e=>a.newPassword=e),required:"",class:"log-input text-black px-2 self-center mt-2 mb-4 text-center"},null,512),[[s.Jo,a.newPassword]])]),(0,r.Lk)("div",yt,[t[29]||(t[29]=(0,r.Lk)("label",{for:"confirmNewPassword",class:"mb-2 font-bold text-xl"},"Confirmer le mot de passe:",-1)),(0,r.bo)((0,r.Lk)("input",{type:"password",id:"confirmNewPassword","onUpdate:modelValue":t[11]||(t[11]=e=>a.confirmNewPassword=e),required:"",class:"log-input text-black px-2 self-center mt-2 mb-4 text-center"},null,512),[[s.Jo,a.confirmNewPassword]])]),t[30]||(t[30]=(0,r.Lk)("button",{type:"submit",class:"custom-bg-blue text-white px-4 py-2 rounded-md"}," Mettre à jour le mot de passe ",-1)),a.error?((0,r.uX)(),(0,r.CE)("p",vt,(0,i.v_)(a.error),1)):(0,r.Q3)("",!0),a.success?((0,r.uX)(),(0,r.CE)("p",ft,(0,i.v_)(a.success),1)):(0,r.Q3)("",!0)],32)):((0,r.uX)(),(0,r.CE)("form",{key:5,onSubmit:t[17]||(t[17]=(0,s.D$)(((...e)=>l.register&&l.register(...e)),["prevent"]))},[t[31]||(t[31]=(0,r.Lk)("label",{class:"text-xl font-bold pb-10"},"Nom:",-1)),(0,r.bo)((0,r.Lk)("input",{class:"text-center mt-2 mb-4",type:"text","onUpdate:modelValue":t[13]||(t[13]=e=>a.username=e),required:""},null,512),[[s.Jo,a.username]]),t[32]||(t[32]=(0,r.Lk)("label",{class:"text-xl font-bold pb-10"},"Email:",-1)),(0,r.bo)((0,r.Lk)("input",{class:"text-center mt-2 mb-4",type:"email","onUpdate:modelValue":t[14]||(t[14]=e=>a.email=e),required:""},null,512),[[s.Jo,a.email]]),t[33]||(t[33]=(0,r.Lk)("label",{class:"text-xl font-bold pb-10"},"Mot de passe:",-1)),(0,r.bo)((0,r.Lk)("input",{class:"text-center mt-2 mb-4",type:"password","onUpdate:modelValue":t[15]||(t[15]=e=>a.password=e),required:""},null,512),[[s.Jo,a.password]]),t[34]||(t[34]=(0,r.Lk)("label",{class:"text-xl font-bold pb-10"},"Confirmer le mot de passe:",-1)),(0,r.bo)((0,r.Lk)("input",{class:"text-center mt-2 mb-4",type:"password","onUpdate:modelValue":t[16]||(t[16]=e=>a.confirmPassword=e),required:""},null,512),[[s.Jo,a.confirmPassword]]),a.error?((0,r.uX)(),(0,r.CE)("p",kt,(0,i.v_)(a.error),1)):(0,r.Q3)("",!0),a.success?((0,r.uX)(),(0,r.CE)("p",xt,(0,i.v_)(a.success),1)):(0,r.Q3)("",!0),t[35]||(t[35]=(0,r.Lk)("button",{class:"custom-bg-blue text-white",type:"submit"}," S'inscrire ",-1))],32))])]))],64)}var Ct={name:"Register",props:{passwordReset:{type:Boolean,default:!1},resetPassword:{type:Boolean,default:!1}},data(){return{isMobile:null,username:"",email:"",password:"",confirmPassword:"",newPassword:"",confirmNewPassword:"",success:"",error:"",userLogged:!1,userName:"",emailSent:null}},mounted(){this.isMobile=window.innerWidth<=768,window.addEventListener("resize",this.handleResize)},methods:{async register(){try{if(this.password!==this.confirmPassword)return this.error="Les mots de passe ne correspondent pas.",void(this.success="");const e=await this.$axios.post("/api/auth/register",{username:this.username,email:this.email,password:this.password});e.data.token?(localStorage.setItem("token",e.data.token),this.$store.dispatch("login",this.username),this.$emit("user-logged-in",this.username),this.$router.push("/")):(this.error="Erreur lors de l'inscription.",this.success="")}catch(e){console.error("Erreur dans la méthode register :",e),e.response&&e.response.data&&e.response.data.message?this.error=e.response.data.message:this.error="Erreur lors de la tentative, veuillez réessayer plus tard.",this.success=""}},async requestPasswordReset(){try{await this.$axios.post("/api/auth/request-password-reset",{email:this.email});this.success="Un email de réinitialisation a été envoyé.",this.error="",this.emailSent=!0}catch(e){console.error(e),this.error="Erreur lors de la tentative, veuillez réessayer.",this.success=""}},async resetPasswordSubmit(){try{if(this.newPassword!==this.confirmNewPassword)return this.error="Les mots de passe ne correspondent pas.",void(this.success="");const e=this.$route.query.token,t=await this.$axios.post("/api/auth/reset-password",{token:e,newPassword:this.newPassword});this.success=t.data.message,this.error="",setTimeout((()=>{this.$router.push("/")}),2e3)}catch(e){console.error(e),this.error="Erreur lors de la réinitialisation du mot de passe.",this.success=""}}}};const Lt=(0,U.A)(Ct,[["render",wt],["__scopeId","data-v-94eca7b6"]]);var Et=Lt;const Dt=[{path:"/",name:"LandingPage",component:Y},{path:"/ongoing-tour",name:"ongoing-tour",component:Ce},{path:"/ongoing-predictions-ranking",name:"ongoing-predictions-ranking",component:Ne},{path:"/archives",name:"archives",component:Be},{path:"/reset-password",name:"reset-password",component:Et,props:e=>({resetPassword:!!e.query.token})},{path:"/register",name:"register",component:Et,props:e=>({passwordReset:"true"===e.query.passwordReset})}],Pt=(0,J.aE)({history:(0,J.LA)("/"),routes:Dt});var Mt=Pt,_t=o(4373);const St=_t.A.create({baseURL:"http://localhost:5000",timeout:5e3,headers:{"Content-Type":"application/json"}});var Xt=St;const $t=(0,s.Ef)(V);$t.config.globalProperties.$axios=Xt,$t.use(W),$t.use(Mt),$t.mount("#app")}},t={};function o(s){var r=t[s];if(void 0!==r)return r.exports;var i=t[s]={exports:{}};return e[s].call(i.exports,i,i.exports,o),i.exports}o.m=e,function(){var e=[];o.O=function(t,s,r,i){if(!s){var n=1/0;for(u=0;u<e.length;u++){s=e[u][0],r=e[u][1],i=e[u][2];for(var a=!0,l=0;l<s.length;l++)(!1&i||n>=i)&&Object.keys(o.O).every((function(e){return o.O[e](s[l])}))?s.splice(l--,1):(a=!1,i<n&&(n=i));if(a){e.splice(u--,1);var c=r();void 0!==c&&(t=c)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[s,r,i]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var s in t)o.o(t,s)&&!o.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){o.p="/"}(),function(){var e={524:0};o.O.j=function(t){return 0===e[t]};var t=function(t,s){var r,i,n=s[0],a=s[1],l=s[2],c=0;if(n.some((function(t){return 0!==e[t]}))){for(r in a)o.o(a,r)&&(o.m[r]=a[r]);if(l)var u=l(o)}for(t&&t(s);c<n.length;c++)i=n[c],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return o.O(u)},s=self["webpackChunkpronos_judo_frontend"]=self["webpackChunkpronos_judo_frontend"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=o.O(void 0,[504],(function(){return o(7323)}));s=o.O(s)})();
//# sourceMappingURL=app.419778ac.js.map